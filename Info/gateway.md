# API Gateway (Ocelot)
## Назначение (продукт)
- Единая точка входа для всех UI (Customer, Manager, Admin).
- Скрывает адреса микросервисов, унифицирует URL, пробрасывает авторизацию и корреляцию.

## Функционал
- Маршрутизация: `/api/auth/*` → IdentityService, `/api/customers/*` → CustomerService, `/api/hotels/*` → HotelService, `/api/reservations/*` → ReservationService, `/api/manager/*` → Reservation/Hotel агрегированные маршруты, `/api/admin/*` → AdminService.
- Авторизация: проброс JWT, валидация ролей на маршрутах (сегментация Customer/Manager/Admin).
- Трассировка: добавление/проброс `X-Correlation-ID`, базовое логирование.
- Опционально: rate limiting для публичных маршрутов, трансформация URL/заголовков.

## Конфигурация данных
- `ocelot.json`: реестры маршрутов, схемы аутентификации, глобальные заголовки для корреляции.
- Возможность подстановки сервисных адресов из env (`DownstreamHostAndPorts` с плейсхолдерами).

## Нефункциональные требования
- Ливнес/редиенс-пробы для самого шлюза.
- Таймауты на проксирование; ограничение тела запроса для публичных методов.
- Поддержка CORS для фронтов.

## DoD
- `ocelot.json` покрывает все сервисы и версии API; маршруты проверены smoke-тестами (регистрация, поиск, бронирование через шлюз).
- Проброс авторизации и `X-Correlation-ID` работает; заголовки добавлены в логи.
- Документация по запуску шлюза и переменным окружения обновлена; `.env.example` содержит адреса сервисов.

